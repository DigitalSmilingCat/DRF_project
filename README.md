# Django REST framework project

Проект представляет собой приложение для хранения информации о перевалах, которые посетили туристы.
Работу проекта можно протестировать по следующему адресу:
> [http://avdonin.pythonanywhere.com](http://avdonin.pythonanywhere.com)

## API методы
#### GET /submitData/
Возвращает список всех существующих записей перевалов.

#### POST /submitData/
Позволяет отправить данные для создания новой записи по перевалу.

#### GET /submitData/{id}
Получает информацию о конкретной записи перевала по её идентификатору.

#### PATCH /submitData/{id}
Позволяет исправить значения конкретных полей существующей записи перевала. Нельзя исправлять поля, относящиеся к пользователю.
В случае успешного выполнения запроса пользователь получит сообщение со статусом "1" и текстом
"Данные записи успешно изменены PATCH-запросом". В случае ошибки — сообщение со
статусом "0" и описанием причины ошибки.

#### PUT /submitData/{id}
Позволяет исправить значения всех полей существующей записи перевала кроме тех, что относятся к пользователю.
В случае успешного выполнения запроса пользователь получит сообщение со статусом "1" и текстом
"Данные записи успешно изменены PUT-запросом". В случае ошибки — сообщение со
статусом "0" и описанием причины ошибки.

#### DELETE /submitData/{id}
Позволяет удалить существующую запись перевала, если её статус "new".

#### GET/submitData/?user__email=\<email>
Позволяет просмотреть список всех созданных записей для конкретного адреса почты.

## Документация
Документация реализована с помощью swagger и redoc. Она доступна по адресам:
> http://avdonin.pythonanywhere.com/swagger/
> 
> http://avdonin.pythonanywhere.com/redoc/

## Примеры
Пример данных для отправки в формате JSON:
```
{
  "beauty_title": "Название препятствия",
  "title": "Название вершины",
  "other_titles": "Другое название",
  "connect": "Что соединяет",
 
  "user": {
        "email": "qwerty@mail.ru",
        "fam": "Пупкин",
        "name": "Василий",
        "otc": "Иванович",
        "phone": "+75555555"}, 

  "coords": {
        "latitude": "45.3842",
        "longitude": "7.1525",
        "height": "1200"},
 
  "level": {
        "winter": "", // Категория трудности перевала в разное время года
        "summer": "1А",
        "autumn": "1А",
        "spring": ""},
 
   "images": [{"data":"<картинка1>", "title":"Седловина"}, {"data":"<картинка>", "title":"Подъём"}]
}
```

***Ответное сообщение на отправленный JSON***

+ *status — код HTTP, целое число:*
 
    *500 — ошибка при выполнении операции;*
    
    *400 — Bad Request (неправильные параметры запроса);*
    
    *200 — успешное выполнение операции.*

    
+ *message — строка:*

   *Причина ошибки (если она была);*
    
    *Отправлено успешно;*
    
    *Если отправка успешна, дополнительно возвращается id вставленной записи.*
    
    *id — идентификатор, который был присвоен объекту при добавлении в базу данных.*
    
    
***Примеры ответов:***

`{ "status": 500, "message": "Ошибка подключения к базе данных","id": null}`

`{ "status": 200, "message": null, "id": 42 }`

## Установка
    * Клонируйте репозиторий.
    * Создайте виртуальное окружение и активируйте его.
    * Установите зависимости из файла requirements.txt: pip install -r requirements.txt
    * Создайте базу данных: python manage.py migrate
    * Запустите сервер: python manage.py runserver
